(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{1488:function(e,t,n){"use strict";n.r(t);var r=n(34),a=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"baseuploadpopup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#baseuploadpopup"}},[e._v("#")]),e._v(" BaseUploadPopUp")]),e._v(" "),t("blockquote",[t("p",[e._v("A component taking care of uploads within a pop up")])]),e._v(" "),t("h2",{attrs:{id:"props"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#props"}},[e._v("#")]),e._v(" Props")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Prop name")]),e._v(" "),t("th",[e._v("Description")]),e._v(" "),t("th",[e._v("Type")]),e._v(" "),t("th",[e._v("Values")]),e._v(" "),t("th",[e._v("Default")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("fileList")]),e._v(" "),t("td",[e._v("register files to upload"),t("br"),e._v("array with file-object(s) from file-input field")]),e._v(" "),t("td",[e._v("array")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("[]")])]),e._v(" "),t("tr",[t("td",[e._v("currentStatus")]),e._v(" "),t("td",[e._v("define current status")]),e._v(" "),t("td",[e._v("string")]),e._v(" "),t("td",[t("code",[e._v("initial")]),e._v(", "),t("code",[e._v("saving")]),e._v(", "),t("code",[e._v("success")]),e._v(", "),t("code",[e._v("failed")])]),e._v(" "),t("td",[e._v("'initial'")])]),e._v(" "),t("tr",[t("td",[e._v("cancelButtonText")]),e._v(" "),t("td",[e._v("define button text"),t("br"),e._v("could be string or path to i18n json as well")]),e._v(" "),t("td",[e._v("string")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("'cancel'")])]),e._v(" "),t("tr",[t("td",[e._v("uploadText")]),e._v(" "),t("td",[e._v("specify informational texts for the component -"),t("br"),e._v("this needs to be an object with the following properties:"),t("br"),t("br"),e._v(" "),t("strong",[e._v("title")]),e._v(" "),t("code",[e._v("string")]),e._v(" - text used in the popup header"),t("br"),e._v(" "),t("strong",[e._v("upload")]),e._v(" "),t("code",[e._v("string")]),e._v(" - default button text"),t("br"),e._v(" "),t("strong",[e._v("done")]),e._v(" "),t("code",[e._v("string")]),e._v(" - button text when upload finished"),t("br"),e._v(" "),t("strong",[e._v("retry")]),e._v(" "),t("code",[e._v("string")]),e._v(" - button text when an upload error occurs"),t("br"),e._v(" "),t("strong",[e._v("quotaExceeded")]),e._v(" "),t("code",[e._v("- string")]),e._v(" text used when user quota is exceeded"),t("br"),t("br"),e._v("The values of this object might be plain text or a key for an i18n file")]),e._v(" "),t("td",[e._v("object")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("{"),t("br"),e._v(" title: 'File Upload',"),t("br"),e._v(" upload: 'Upload',"),t("br"),e._v(" done: 'Done',"),t("br"),e._v(" retry: 'Try Again',"),t("br"),t("br"),e._v(" quotaExceeded: 'Unfortunately you exceeded your quota, because you have '"),t("br"),e._v(" + 'only {space} of space left. Please remove some files to enable uploading.'"),t("br"),e._v("}")])]),e._v(" "),t("tr",[t("td",[e._v("uploadPercentage")]),e._v(" "),t("td",[e._v("current upload progress in percent per file"),t("br"),e._v("array with current upload progress per file"),t("br"),e._v("e.g. [11, 55, 100]")]),e._v(" "),t("td",[e._v("array")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("[]")])]),e._v(" "),t("tr",[t("td",[e._v("userSpace")]),e._v(" "),t("td",[e._v("define current free storage space (bytes)")]),e._v(" "),t("td",[e._v("number")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("10000000")])]),e._v(" "),t("tr",[t("td",[e._v("rejectedFiles")]),e._v(" "),t("td",[e._v("define rejected files"),t("br"),e._v("array with filename(s)")]),e._v(" "),t("td",[e._v("array")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("[]")])]),e._v(" "),t("tr",[t("td",[e._v("uploadedFiles")]),e._v(" "),t("td",[e._v("define uploaded files"),t("br"),e._v("array with filename(s)")]),e._v(" "),t("td",[e._v("array")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("[]")])]),e._v(" "),t("tr",[t("td",[e._v("fileErrors")]),e._v(" "),t("td",[e._v("define errors for rejected files"),t("br"),e._v("array with objects"),t("br"),e._v("eg: "),t("code",[e._v("[{ name: 'foo.txt', message: 'The file may include a virus' }]")]),t("br"),e._v("Note: each object must contain the properties: "),t("code",[e._v("name")]),e._v(", "),t("code",[e._v("message")])]),e._v(" "),t("td",[e._v("array")]),e._v(" "),t("td",[e._v("-")]),e._v(" "),t("td",[e._v("[]")])])])]),e._v(" "),t("h2",{attrs:{id:"events"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[e._v("#")]),e._v(" Events")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Event name")]),e._v(" "),t("th",[e._v("Properties")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("cancel-upload")]),e._v(" "),t("td"),e._v(" "),t("td",[e._v("Event emitted when cancel button is clicked")])]),e._v(" "),t("tr",[t("td",[e._v("start-upload")]),e._v(" "),t("td"),e._v(" "),t("td",[e._v("Event emitted when upload button is clicked")])]),e._v(" "),t("tr",[t("td",[e._v("remove-file")]),e._v(" "),t("td",[t("strong",[e._v("undefined")]),e._v(" "),t("code",[e._v("number")]),e._v(" - index of the file entry")]),e._v(" "),t("td",[e._v("Event emitted when remove button on file entry is clicked")])])])]),e._v(" "),t("h2",{attrs:{id:"slots"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#slots"}},[e._v("#")]),e._v(" Slots")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("Name")]),e._v(" "),t("th",[e._v("Description")]),e._v(" "),t("th",[e._v("Bindings")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("default")]),e._v(" "),t("td",[e._v("slot for additional content after upload bars but before buttons")]),e._v(" "),t("td")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"demo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[e._v("#")]),e._v(" Demo")]),e._v(" "),t("no-ssr",[t("vue-live",{attrs:{layoutProps:{lang:"vue"},code:'<template>\n  <div class="container">\n    <BaseButton\n      button-style="row"\n      icon="camera"\n      icon-size="large"\n      :text="\'Upload Files\'"\n      @clicked="openFileDialogue"\n    />\n\n    <BaseUploadPopUp\n      ref="uploadPopUp"\n      :show="!!fileList.length"\n      :cancel-button-text="\'Cancel\'"\n      :current-status="currentStatus"\n      :file-list="fileList"\n      :user-space="userSpace"\n      :upload-percentage="uploadPercentage"\n      :rejected-files="rejectedFiles"\n      :uploaded-files="uploadedFiles"\n      :upload-text="uploadText"\n      @cancel-upload="cancelUpload"\n      @remove-file="removeFile"\n      @start-upload="startUpload"\n    >\n      <div key="popup-text" class="popup-text">\n        <BaseDropDown\n          v-model="license"\n          :label="\'Choose a License\'"\n          :header-background-color="\'rgb(240, 240, 240)\'"\n          :options="licenses"\n          :show-label="true"\n          class="upload-dropdown"\n        />\n        <BaseDropDown\n          v-model="publish"\n          :label="\'Publish files?\'"\n          :header-background-color="\'rgb(240, 240, 240)\'"\n          :options="publishOptions"\n          :show-label="true"\n          class="upload-dropdown"\n        />\n      </div>\n    </BaseUploadPopUp>\n\n    <input\n      ref="fileInput"\n      type="file"\n      multiple\n      class="hidden"\n      @change="handleFileSelect"\n    />\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      fileList: [],\n      currentStatus: "initial",\n      userSpace: 10000000,\n      uploadPercentage: [],\n      rejectedFiles: [],\n      uploadedFiles: [],\n      errorFiles: [],\n      license: {},\n      licenses: [\n        { label: "Copyright", value: "Copyright" },\n        {\n          label: "Creative Commons Attribution 4.0",\n          value: "Creative Commons Attribution 4.0",\n        },\n        {\n          label: "Creative Commons Attribution No Derivatives 4.0",\n          value: "Creative Commons Attribution No Derivatives 4.0",\n        },\n      ],\n      publish: {},\n      publishOptions: [\n        { label: "no", value: "false" },\n        { label: "yes", value: "true" },\n      ],\n    };\n  },\n  computed: {\n    uploadText() {\n      return {\n        title: "File Upload",\n        upload: "Upload",\n        done: "Done",\n        retry: "Try Again",\n        quotaExceeded: `Unfortunately you exceeded your quota, because you have only ${this.convertSpace(\n          this.userSpace\n        )} of space left. Please remove some files to enable uploading.`,\n      };\n    },\n  },\n  methods: {\n    handleFileSelect(e) {\n      // get files - depending if dragged or selected from file browse different event prop\n      const files = e.dataTransfer ? e.dataTransfer.files : e.target.files;\n      // check if it was actual files that were dragged in\n      if (files && files.length) {\n        for (let i = 0; i < files.length; i += 1) {\n          this.fileList.push(files[i]);\n        }\n      }\n    },\n    openFileDialogue() {\n      this.$refs.fileInput.dispatchEvent(new MouseEvent("click"));\n    },\n    cancelUpload() {\n      this.reset();\n    },\n    reset() {\n      this.currentStatus = "initial";\n      this.uploadedFiles = [];\n      this.rejectedFiles = [];\n      this.fileList = [];\n    },\n    removeFile(index) {\n      this.fileList.splice(index, 1);\n    },\n    startUpload() {\n      if (this.currentStatus === "initial") {\n        alert("start upload");\n        this.currentStatus = "success";\n        return;\n      }\n      this.reset();\n    },\n    convertSpace(bytes, si) {\n      let newBytes = bytes;\n      const thresh = si ? 1000 : 1024;\n      if (Math.abs(bytes) < thresh) {\n        return `${bytes} B`;\n      }\n      const units = si\n        ? ["kB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"]\n        : ["KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"];\n      let u = -1;\n      do {\n        newBytes /= thresh;\n        u += 1;\n      } while (Math.abs(newBytes) >= thresh && u < units.length - 1);\n      return `${newBytes.toFixed(1)} ${units[u]}`;\n    },\n  },\n};\n<\/script>\n\n<style>\n.container {\n  background-color: rgb(240, 240, 240);\n  padding: 16px;\n}\n\n.hidden {\n  position: absolute !important;\n  top: auto !important;\n  left: -9999px !important;\n}\n\n.popup-text {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n}\n\n.upload-dropdown {\n  width: calc(50% - 16px / 2);\n  flex: 0 0 auto;\n}\n</style>\n',requires:{}}})],1)],1)}),[],!1,null,null,null);t.default=a.exports}}]);