(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1280:function(e,t,n){"use strict";n.r(t);n(217),n(74);var i=n(399),a=n(19),r=n(402),o=n(101),l=(n(726),n(48),n(401),n(216),n(100),n(99),n(222),n(406),n(400),n(136),n(437),n(129),n(7),n(435),n(221),n(727),n(219),n(18),n(97),n(21),n(1281)),s=n(412),u=["errorMessage","invalid","isActive","isLoading","linkedListOption","activeTab","validationTexts"],d={name:"BaseForm",components:{BaseButton:function(){return Promise.all([n.e(0),n.e(66)]).then(n.bind(null,428)).then((function(e){return e.default||e}))},BaseIcon:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,395)).then((function(e){return e.default||e}))},BaseFormFieldCreator:l.default},mixins:[s.a],props:{formFieldJson:{type:Object,required:!0},valueList:{type:Object,default:function(){return{}}},language:{type:String,default:"en"},availableLocales:{type:Array,default:function(){return[]}},formId:{type:String,default:""},formStyle:{type:Object,default:function(){return{}}},fieldsWithTabs:{type:Array,default:function(){return[]}},fieldIsLoading:{type:String,default:""},dropDownLists:{type:Object,default:function(){return{}}},showErrorIcon:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},fieldProps:{type:Object,default:function(){return{}},validator:function(e){return 0===Object.keys(e).length||Object.values(e).every((function(e){return Object.keys(e)}))}},renderHeaderAs:{type:String,default:"div"},validationTexts:{type:Object,default:function(){return{text:{min:"Value must be greater than or equal to {value}.",max:"Value must be less than or equal to {value}.",minLength:"Text must be at least {value} character(s) long.",maxLength:"Text cannot be longer than {value} characters."},chips:{required:"Select an option."}}},validator:function(e){return["text"].every((function(t){return Object.keys(e).includes(t)}))&&["min","max","minLength","maxLength"].every((function(t){return Object.keys(e.text).includes(t)}))}},identifierPropertyName:{type:String,default:"source"},labelPropertyName:{type:String,default:"label"},assistiveText:{type:Object,default:function(){return{loaderActive:"loading.",resultsRetrieved:"{number} options in drop down.",optionAdded:"option {label} added to selected list.",optionToRemoveSelected:"option {label} from selected list marked for removal. Press delete or backspace to remove.",optionRemoved:"option {label} removed."}}}},data:function(){return{multiplyParams:null,fetchingAutocompleteFor:"",valueListInt:{}}},computed:{cleanedAndSortedFormFieldList:function(){return Object.entries(this.formFieldJson).filter((function(e){var t,n=Object(o.a)(e,2)[1];return!(n.$ref||null!==(t=n["x-attrs"])&&void 0!==t&&t.hidden)})).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return Object(r.a)({name:n},i)})).sort((function(e,t){var n,i;return(null===(n=e["x-attrs"])||void 0===n?void 0:n.order)>(null===(i=t["x-attrs"])||void 0===i?void 0:i.order)?1:-1}))},formFieldListInt:function(){return this.cleanedAndSortedFormFieldList.reduce((function(e,t){var n,i,a=t["x-attrs"],r=a.field_format,o=a.order,l=a.field_type,s=e.length-1;r&&"group"!==l&&["half","third"].includes(r)&&e[s]&&(null===(n=e[s])||void 0===n?void 0:n.type)===r&&("half"===r&&e[s].data.length<2||"third"===r&&e[s].data.length<3)&&e[s].data.at(-1)["x-attrs"].order+1>=o?e[s].data.push(t):e.push({type:r&&"group"!==(null===(i=t["x-attrs"])||void 0===i?void 0:i.field_type)?r:"full",data:[t]});return e}),[])},formHeader:function(){var e=this.cleanedAndSortedFormFieldList.find((function(e){return e["x-attrs"]&&e["x-attrs"].form_group_title}));return e?e["x-attrs"].form_group_title:""}},watch:{valueList:{handler:function(e){var t=this;Object.keys(this.valueListInt).some((function(n){return JSON.stringify(t.valueListInt[n])!==JSON.stringify(e[n])}))&&this.initializeValueObject()},deep:!0},formFieldJson:{handler:function(){this.valueListInt={},this.initializeValueObject()},immediate:!0}},updated:function(){if(this.multiplyParams&&this.multiplyParams.name){var e=this.$refs[this.multiplyParams.name];e.length&&setTimeout((function(t){var n=e[t.index].getElementsByTagName("textarea").length?e[t.index].getElementsByTagName("textarea"):e[t.index].getElementsByTagName("input");n.length&&n[0].focus()}),50,this.multiplyParams),this.multiplyParams=null}},mounted:function(){var e=this;this.$nextTick((function(){e.$emit("form-mounted")}))},methods:{fetchAutocomplete:function(e){this.fetchingAutocompleteFor=e.name,this.$emit("fetch-autocomplete",e)},onInputComplete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.setFieldValue(e,t,n),this.$emit("input-complete",this.valueListInt)},setFieldValue:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n>=0?this.$set(this.valueListInt[t],n,JSON.parse(JSON.stringify(e))):this.$set(this.valueListInt,t,e?JSON.parse(JSON.stringify(e)):e),this.propagateValueListChanges()},propagateValueListChanges:function(){this.$emit("values-changed",this.valueListInt)},initializeValueObject:function(){var e=this;this.cleanedAndSortedFormFieldList.forEach((function(t){e.$set(e.valueListInt,t.name,e.getInitialFieldValue(t))}))},getInitialFieldValue:function(e){var t=this,n=e.name,i=e["x-attrs"],o=e.type,l=e.items,s=e.properties,u=this.valueList[n],d=null==i?void 0:i.field_type;if(["number","integer"].includes(o))return u||"";if(d&&d.includes("chips")&&"object"===o)return u&&Object.keys(u).length?[].concat(u):[];if("array"===o)return"object"===Object(a.a)(u)&&u&&u.length?[].concat(u):!i||!d||d&&!d.includes("chips")?[].concat(this.getInitialFieldValue(l)):[];if("object"===o){var c={};return Object.keys(s).forEach((function(e){t.$set(c,e,t.getInitialFieldValue(s[e]))})),Object(r.a)(Object(r.a)({},c),u)}return"boolean"===o?u||!1:"string"==typeof u?u:""},multiplyField:function(e,t){var n=this.getInitialFieldValue(e.items);t||0===t?this.valueListInt[e.name].splice(t+1,0,n):this.valueListInt[e.name].push(n),this.multiplyParams={index:t||0===t?t+1:this.valueListInt[e.name].length-1,name:e.name},this.propagateValueListChanges()},removeField:function(e,t){var n=this.valueListInt[e.name];n&&n.length>1?n.splice(t,1):this.$set(n,t,this.getInitialFieldValue(e.items)),this.propagateValueListChanges(),this.$emit("input-complete",this.valueListInt)},validate:function(){var e=[];return this.$refs.baseFormField.forEach((function(t){if(Object.keys(t.$refs).length){var n=Object.keys(t.$refs)[0];if(void 0!==t.$refs[n].validate){var i=t.$refs[n].validate();i&&e.push(i)}}})),!!e.length},formFieldComponentProps:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=e.name,s=this.fieldProps[l]?JSON.parse(JSON.stringify(this.fieldProps[l])):{},d=a>=0;if(d){var c=Object.entries(s).filter((function(e){var t=Object(o.a)(e,1)[0];return u.includes(t)}));if(c.length){var f=c.reduce((function(e,t){var n=Object(o.a)(t,2),l=n[0],u=n[1];return Object.keys(u).includes(a.toString())?Object(r.a)(Object(r.a)({},e),{},Object(i.a)({},l,u[a.toString()])):(delete s[l],e)}),{});s=Object(r.a)(Object(r.a)({},s),f)}}var m=d?"".concat(t,"_").concat(n,"_").concat(a):"".concat(t,"_").concat(n);return{field:e,label:s&&s.label?s.label:this.getFieldName(e),fieldProps:s,showLabel:!this.allowMultiply(e)||!this.multiplyButtonsInline(e)||0===a,dropDownList:this.dropDownLists[l],secondaryDropdown:this.dropDownLists["".concat(l,"_secondary")],language:this.language,availableLocales:this.availableLocales,sortText:this.getI18nTerm("form.sort")||"Sort",fieldKey:"".concat(l,"_").concat(m,"_").concat(this.formId),fieldValue:d?this.valueListInt[l][a]:this.valueListInt[l],autocompleteLoading:this.fieldIsLoading===l,fieldGroupParams:this.cleanedAndSortedFormFieldList.some((function(e){return e["x-attrs"]&&"group"===e["x-attrs"].field_type}))?this.$props:null,clearable:this.clearable,showErrorIcon:this.showErrorIcon,validationTexts:s.validationTexts||this.validationTexts,identifierPropertyName:this.identifierPropertyName,labelPropertyName:this.labelPropertyName,assistiveText:s.assistiveText||this.assistiveText}},allowMultiply:function(e){return"array"===e.type&&(!e["x-attrs"]||!e["x-attrs"].field_type||e["x-attrs"]&&!["chips","chips-below"].includes(e["x-attrs"].field_type))},multiplyButtonsInline:function(e){return!["group","multiline"].includes(e["x-attrs"].field_type)},fieldIsDateSwitch:function(e){var t,n;return(null==e||null===(t=e.field_type)||void 0===t?void 0:t.includes("date"))&&(null==e||null===(n=e.date_format)||void 0===n?void 0:n.includes("_"))},getFieldName:function(e){return e.title||this.getI18nTerm("form.".concat(e.name)||!1)},checkFieldContent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.hasValues(t<0?this.valueListInt[e][t]:this.valueListInt[e])},hasValues:function(e){var t=this,n=!1;e&&"object"===Object(a.a)(e)?e.length>=0?e.forEach((function(e){n=t.hasValues(e)||n})):Object.keys(e).forEach((function(i){n=t.hasValues(e[i])||n})):n=0===e||!!e||n;return n}}},c=(n(724),n(725),n(34)),f=Object(c.a)(d,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"base-form",style:e.formStyle},[e.formHeader?t(e.renderHeaderAs,{tag:"component",staticClass:"base-form__header"},[e._v("\n    "+e._s(e.formHeader)+"\n  ")]):e._e(),e._v(" "),t("div",{staticClass:"base-form__body"},e._l(e.formFieldListInt,(function(n,i){return t("div",{key:"form-row-".concat(e.formId,"-").concat(i),class:["base-form__form-row","base-form__form-row--".concat(n.type)]},[e._l(n.data,(function(a,r){return[e.allowMultiply(a)?e.allowMultiply(a)?t("div",{key:"".concat(a.name,"_").concat(r,"_").concat(e.formId,"_wrapper"),class:["base-form__input-field","base-form__input-field--".concat(n.type),{"base-form__input-field--date-switch-spacing":e.fieldIsDateSwitch(a["x-attrs"])}]},e._l(e.valueListInt[a.name],(function(o,l){return t("div",{key:"".concat(a.name,"_").concat(r,"_").concat(l,"_").concat(e.formId,"_wrapper"),ref:a.name,refInFor:!0,class:[{"base-form__repeatable-field":e.multiplyButtonsInline(a)}]},[t("BaseFormFieldCreator",e._b({key:"".concat(a.name,"_").concat(r,"_").concat(l,"_").concat(e.formId),ref:"baseFormField",refInFor:!0,class:["base-form__input-component",{"base-form__input-component--margin-bottom":!e.multiplyButtonsInline(a)}],on:{"field-value-changed":function(t){return e.setFieldValue(t,a.name,l)},"fetch-autocomplete":e.fetchAutocomplete,"input-complete":function(t){return e.onInputComplete(t,a.name,l)}},scopedSlots:e._u([{key:"label-addition",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("label-addition",null,{fieldName:n,groupNames:i,index:l})]}},{key:"pre-input-field",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("pre-input-field",null,{fieldName:n,groupNames:i,index:l})]}},{key:"input-field-addition-before",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("input-field-addition-before",null,{fieldName:n,groupNames:i,index:l})]}},{key:"input-field-inline-before",fn:function(i){var a=i.fieldName,r=i.groupNames;return[n["x-attrs"]&&n["x-attrs"].text_before?t("span",{staticClass:"base-form__input-field__text-before"},[e._v("\n                  "+e._s(n["x-attrs"].text_before)+"\n                ")]):e._e(),e._v(" "),e._t("input-field-inline-before",null,{fieldName:a,groupNames:r,index:l})]}},{key:"input-field-addition-after",fn:function(i){var a=i.fieldName,r=i.groupNames;return[n["x-attrs"]&&n["x-attrs"].text_after?t("span",{staticClass:"base-form__input-field__text-after"},[e._v("\n                  "+e._s(n["x-attrs"].text_after)+"\n                ")]):e._e(),e._v(" "),e._t("input-field-addition-after",null,{fieldName:a,groupNames:r,index:l})]}},{key:"post-input-field",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("post-input-field",null,{fieldName:n,groupNames:i,index:l})]}},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("remove-icon")]},proxy:!0},{key:"below-input",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("below-input",null,{fieldName:n,groupNames:i,index:l})]}},{key:"drop-down-entry",fn:function(t){var n=t.option,i=t.fieldName,a=t.groupNames;return[e._t("drop-down-entry",null,{fieldName:i,groupNames:a,option:n})]}}],null,!0)},"BaseFormFieldCreator",e.formFieldComponentProps(a,r,i,l),!1)),e._v(" "),e.multiplyButtonsInline(a)?[t("div",{ref:"multiplyButtons",refInFor:!0,staticClass:"base-form__inline-buttons"},[e.valueListInt[a.name].length>1||e.checkFieldContent(a.name,0)?t("BaseButton",{staticClass:"base-form__inline-button",attrs:{"icon-title":1===e.valueListInt[a.name].length?e.getI18nTerm("form.clearField")||"Clear":e.getI18nTerm("form.removeField",-1,{fieldType:e.getFieldName(n)}),"has-background-color":!1,text:"","button-style":"single",icon:"remove","icon-size":"large"},on:{clicked:function(t){return e.removeField(a,l)}}}):e._e(),e._v(" "),t("BaseButton",{staticClass:"base-form__inline-button",attrs:{"icon-title":l!==e.valueListInt[a.name].length-1?e.getI18nTerm("form.addGroupBelow",-1,{fieldType:e.getFieldName(a)}):e.getI18nTerm("form.addGroup",-1,{fieldType:e.getFieldName(a)}),"has-background-color":!1,text:"","button-style":"single",icon:"plus","icon-size":"large"},on:{clicked:function(t){return e.multiplyField(a,l)}}})],1)]:e._e(),e._v(" "),t("div",{staticClass:"base-form__multiply-buttons"},[!e.multiplyButtonsInline(a)&&(e.valueListInt[a.name].length>1||e.checkFieldContent(a.name,0))?t("BaseButton",{class:["base-form__multiply-button","base-form__multiply-button--remove"],attrs:{text:1===e.valueListInt[a.name].length?e.getI18nTerm("form.clearField")||"Clear":e.getI18nTerm("form.removeField",-1,{fieldType:e.getFieldName(a)}),"has-background-color":!1,"icon-position":"right",icon:"remove"},on:{clicked:function(t){return e.removeField(a,l)}}}):e._e(),e._v(" "),e.multiplyButtonsInline(a)?e._e():t("BaseButton",{staticClass:"base-form__multiply-button",attrs:{text:e.getI18nTerm("form.addGroup",-1,{fieldType:e.getFieldName(a)}),"has-background-color":!1,"icon-position":"right",icon:"plus"},on:{clicked:function(t){return e.multiplyField(a,l)}}})],1)],2)})),0):e._e():t("BaseFormFieldCreator",e._b({key:"".concat(a.name,"_").concat(i,"_").concat(r,"_").concat(e.formId),ref:"baseFormField",refInFor:!0,class:["base-form__input-field","base-form__input-field--".concat(n.type),{"base-form__input-field--top-margin":"boolean"===a.type},{"base-form__input-field--date-switch-spacing":e.fieldIsDateSwitch(a["x-attrs"])}],on:{"field-value-changed":function(t){return e.setFieldValue(t,a.name)},"fetch-autocomplete":e.fetchAutocomplete,"input-complete":function(t){return e.onInputComplete(t,a.name)}},scopedSlots:e._u([{key:"label-addition",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("label-addition",null,{fieldName:n,groupNames:i})]}},{key:"pre-input-field",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("pre-input-field",null,{fieldName:n,groupNames:i})]}},{key:"input-field-addition-before",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("input-field-addition-before",null,{fieldName:n,groupNames:i})]}},{key:"input-field-inline-before",fn:function(i){var a=i.fieldName,r=i.groupNames;return[e._t("input-field-inline-before",null,{fieldName:a,groupNames:r}),e._v(" "),n["x-attrs"]&&n["x-attrs"].text_before?t("span",{staticClass:"base-form__input-field__text-before"},[e._v("\n              "+e._s(n["x-attrs"].text_before)+"\n            ")]):e._e()]}},{key:"input-field-addition-after",fn:function(i){var a=i.fieldName,r=i.groupNames;return[n["x-attrs"]&&n["x-attrs"].text_after?t("span",{staticClass:"base-form__input-field__text-after"},[e._v("\n              "+e._s(n["x-attrs"].text_after)+"\n            ")]):e._e(),e._v(" "),e._t("input-field-addition-after",null,{fieldName:a,groupNames:r})]}},{key:"post-input-field",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("post-input-field",null,{fieldName:n,groupNames:i})]}},{key:"error-icon",fn:function(){return[e._t("error-icon")]},proxy:!0},{key:"remove-icon",fn:function(){return[e._t("remove-icon")]},proxy:!0},{key:"below-input",fn:function(t){var n=t.fieldName,i=t.groupNames;return[e._t("below-input",null,{fieldName:n,groupNames:i})]}},{key:"drop-down-entry",fn:function(t){var n=t.option,i=t.fieldName,a=t.groupNames;return[e._t("drop-down-entry",null,{fieldName:i,groupNames:a,option:n})]}}],null,!0)},"BaseFormFieldCreator",e.formFieldComponentProps(a,r,i),!1))]}))],2)})),0)],1)}),[],!1,null,"17080c55",null);t.default=f.exports},602:function(e,t,n){},603:function(e,t,n){},724:function(e,t,n){"use strict";n(602)},725:function(e,t,n){"use strict";n(603)},726:function(e,t,n){"use strict";var i=n(1),a=n(16),r=n(30),o=n(73),l=n(131);i({target:"Array",proto:!0},{at:function(e){var t=a(this),n=r(t),i=o(e),l=i>=0?i:n+i;return l<0||l>=n?void 0:t[l]}}),l("at")},727:function(e,t,n){"use strict";var i=n(1),a=n(3),r=n(31),o=n(73),l=n(13),s=n(2),u=a("".charAt);i({target:"String",proto:!0,forced:s((function(){return"\ud842"!=="𠮷".at(-2)}))},{at:function(e){var t=l(r(this)),n=t.length,i=o(e),a=i>=0?i:n+i;return a<0||a>=n?void 0:u(t,a)}})}}]);